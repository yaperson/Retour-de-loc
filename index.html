<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="shortcut icon" href="./assets/icons/192.png" type="image/x-icon">
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json" />
    <title>Contr√¥le Mat√©riel M√©dical</title>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js').then(function (reg) {
                console.log('Service Worker enregistr√©', reg);
            }).catch(function (err) {
                console.error('Erreur SW:', err);
            });
        }
    </script>
</head>

<body>

    <h1>Contr√¥le Mat√©riel M√©dical</h1>

    
    <button id="btnScan">üì∑ Scanner code-barres</button>
    <button id="endScan" title="Arreter le scan">‚úñÔ∏è</button>
    <div id="scanner"></div>

    <label for="serial_number">Num√©ro de s√©rie</label>
    <input type="text" id="serial_number">

    <label for="typeMateriel">Choisir le type de mat√©riel :</label>
    <select id="typeMateriel" required>
        <option value="">-- S√©lectionner --</option>
        <option value="lit">Lit m√©dicalis√©</option>
        <option value="fauteuil_manuel">Fauteuil roulant manuel</option>
        <option value="fauteuil_electrique">Fauteuil roulant √©lectrique</option>
        <option value="leve_personne">L√®ve-personne / verticalisateur</option>
        <option value="autre">Autre</option>
    </select>

    <div id="questionsContainer" class="questions"></div>

    <div class="notes_container" id="notes_container">
        <label for="notes">Notes :</label>
        <textarea name="notes" id="notes"></textarea>
    </div>

    <div id="photosContainer" style="margin-top:1.5rem; display:none;">
        <label>Photo de l'ensemble :</label>
        <input type="file" accept="image/*" capture="environment" id="photoEnsemble" />
        <img id="previewEnsemble" class="preview" alt="Aper√ßu photo ensemble" />

        <label>Photo de l'√©tiquette (n¬∞ de s√©rie) :</label>
        <input type="file" accept="image/*" capture="environment" id="photoEtiquette" />
        <img id="previewEtiquette" class="preview" alt="Aper√ßu photo √©tiquette" />
    </div>

    <button id="btnSummary" disabled>Voir r√©sum√© & Partager</button>

    <!-- Modale r√©sum√© -->
    <div id="modal">
        <div>
            <button id="closeModal" title="Fermer la fen√™tre">‚úñÔ∏è</button>
            <div id="modalContent"></div>
            <div style="text-align:center; margin-top:1.5rem;">
                <button id="btnModalPrint">üñ®Ô∏è Imprimer</button>
                <button id="btnModalDownload">‚¨áÔ∏è T√©l√©charger</button>
                <!-- <button id="btnModalMail">üìß Envoyer par mail</button> -->
                <button id="btnModalShare">üì§ Partager</button>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/quagga/0.12.1/quagga.min.js"></script>
    <script src="app.js"></script>
</body>

</html>